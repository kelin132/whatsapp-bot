

```js
const {
  default: makeWASocket,
  useMultiFileAuthState,
  fetchLatestBaileysVersion
} = require('@whiskeysockets/baileys');

let welcomeOn = true; // default: welcome messages enabled

const startBot = async () => {
  const { version } = await fetchLatestBaileysVersion();
  const { state, saveCreds } = await useMultiFileAuthState('auth_info');

  const sock = makeWASocket({
    version,
    auth: state,
    printQRInTerminal: true
  });

  sock.ev.on('creds.update', saveCreds);

  // Listen for new group participants
  sock.ev.on('group-participants.update', async (update) => {
    const { id, participants, action } = update;
    if (action === 'add' && welcomeOn) {
      for (let user of participants) {
        await sock.sendMessage(id, {
          text: `👋 Welcome <@${user.split('@')[0]}> to the group!`,
          mentions: [user]
        });
      }
    }
  });

  // Listen for text commands
  sock.ev.on('messages.upsert', async (m) => {
  const msg = m.messages[0];
    if (!msg.message || !msg.message.conversation) return;

    const from = msg.key.remoteJid;
    const text = msg.message.conversation.trim();

    if (text === '.welcome on') {
      welcomeOn = true;
      await sock.sendMessage(from, { text: '✅ Welcome messages enabled!' });
    } else if (text === '.welcome off') {
      welcomeOn = false;
      await sock.sendMessage(from, { text: '❌ Welcome messages disabled!' });
    }
  });
};

startBot();
```

---
